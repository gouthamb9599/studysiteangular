!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("chart.js")):"function"==typeof define&&define.amd?define("ng-chartjs",["exports","@angular/core","chart.js"],e):e((t=t||self)["ng-chartjs"]={},t.ng.core,t.chart_js)}(this,(function(t,e,r){"use strict";var n=function(){function t(){this._chartInstances=[],this._chartId=[]}return t.prototype.addChart=function(t,e){for(var r=0;r<this._chartId.length;r++)if(t===this._chartId[r])return;this._chartId.push(t),this._chartInstances.push(e)},t.prototype.removeChart=function(t){for(var e=0;e<this._chartId.length;e++)t===this._chartId[e]&&(this._chartId.splice(e,1),this._chartInstances.splice(e,1))},t.prototype.getChart=function(t){for(var e=0;e<this._chartId.length;e++)if(t===this._chartId[e])return this._chartInstances[e];return null},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}();var a=new e.InjectionToken("[ngx-chart-js] Global Default Plugin"),o=new e.InjectionToken("[ngx-chart-js] Global Custom Plugin"),i=function(){function t(t){void 0===t&&(t=[]),this._plugins=t}return Object.defineProperty(t.prototype,"plugins",{get:function(){return this._plugins},enumerable:!0,configurable:!0}),t}();var s=function(){function t(t,e){if(this.pluginConfig=t,this.storeService=e,this.plugins=t.plugins,0!==this.plugins.length||this.plugins)for(var n=0;n<this.plugins.length;n++)this.plugins[n]&&r.Chart.plugins.register(this.plugins[n])}return t.prototype.getChart=function(t){return this.storeService.getChart(t)},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:i,decorators:[{type:e.Inject,args:[e.forwardRef((function(){return o}))]}]},{type:n}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(o),e.ɵɵinject(n))},token:t,providedIn:"root"}),t}();var h=[[63,81,181],[255,152,0],[233,30,99],[156,39,176],[0,188,212],[3,169,244],[0,150,136],[96,125,139],[255,193,7],[37,155,36],[205,220,57],[86,119,252]];function u(t,e){return"rgba("+t.concat(e).join(",")+")"}function c(t,e){return Math.floor(Math.random()*(e-t+1))+t}function l(t){return{backgroundColor:u(t,.4),borderColor:u(t,1),pointBackgroundColor:u(t,1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:u(t,.8)}}function d(t){return{backgroundColor:u(t,.6),borderColor:u(t,1),hoverBackgroundColor:u(t,.8),hoverBorderColor:u(t,1)}}function p(t){return{backgroundColor:t.map((function(t){return u(t,.6)})),borderColor:t.map((function(){return"#fff"})),pointBackgroundColor:t.map((function(t){return u(t,1)})),pointBorderColor:t.map((function(){return"#fff"})),pointHoverBackgroundColor:t.map((function(t){return u(t,1)})),pointHoverBorderColor:t.map((function(t){return u(t,1)}))}}function g(t){return{backgroundColor:t.map((function(t){return u(t,.6)})),borderColor:t.map((function(t){return u(t,1)})),hoverBackgroundColor:t.map((function(t){return u(t,.8)})),hoverBorderColor:t.map((function(t){return u(t,1)}))}}function f(){return[c(0,255),c(0,255),c(0,255)]}function v(t){return h[t]||f()}function y(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=h[r]||f();return e}function C(t,e,r){return"pie"===t||"doughnut"===t?p(y(r)):"polarArea"===t?g(y(r)):"line"===t||"radar"===t?l(v(e)):"bar"===t||"horizontalBar"===t?d(v(e)):v(e)}var m=function(){function t(t,r,n){this.ngChartjsService=r,this.storeService=n,this.labels=[],this.options={},this.chartClick=new e.EventEmitter,this.chartHover=new e.EventEmitter,this.initFlag=!1,this.hasChanges=!1,this.element=t}return t.prototype.ngOnInit=function(){this.ctx=this.element.nativeElement.getContext("2d"),this.initFlag=!0,(this.data||this.datasets)&&this.refresh()},t.prototype.ngOnChanges=function(t){this.initFlag&&((t.hasOwnProperty("data")||t.hasOwnProperty("datasets"))&&(t.data?this.updateChartData(t.data.currentValue):this.updateChartData(t.datasets.currentValue),this.hasChanges=!0),t.hasOwnProperty("labels")&&(this.chart.data.labels=t.labels.currentValue,this.hasChanges=!0),t.hasOwnProperty("legend")&&t.legend.currentValue!==t.legend.previousValue&&(this.chart.options.legend.display=t.legend.currentValue,this.hasChanges=!0),t.hasOwnProperty("adding")&&(this.addData(t.adding.currentValue.labels,t.adding.currentValue.data),this.hasChanges=!0),t.hasOwnProperty("removing")&&("oldest"!==t.removing.currentValue.orientation&&"latest"!==t.removing.currentValue.orientation||(this.removeData(t.removing.currentValue.orientation),this.hasChanges=!0)),t.hasOwnProperty("chartType")&&this.refresh(),t.hasOwnProperty("resetOption")&&(Object.assign(this.chart.options,t.resetOption.currentValue),this.hasChanges=!0),this.hasChanges&&(this.chart.update(),this.hasChanges=!1))},t.prototype.ngOnDestroy=function(){this.chart&&(this.chart.destroy(),this.chart=void 0,this.element.nativeElement.hasAttribute("id")&&this.storeService.removeChart(this.element.nativeElement.id))},t.prototype.refresh=function(){this.ngOnDestroy(),this.chart=this.getChartBuilder(this.ctx),this.element.nativeElement.hasAttribute("id")&&this.storeService.addChart(this.element.nativeElement.id,this.chart)},t.prototype.addData=function(t,e){var r=this;0!==t.length&&0!==e.length&&(t.forEach((function(t){r.chart.data.labels.push(t)})),this.chart.data.datasets.forEach((function(t,r){if(e[r])for(var n=0;n<e[r].length;n++)t.data.push(e[r][n]);else console.log("The added data does not match the original data")})))},t.prototype.removeData=function(t){if("latest"===t)return this.chart.data.labels.pop(),void this.chart.data.datasets.forEach((function(t){t.data.pop()}))},t.prototype.updateChartData=function(t){Array.isArray(t[0].data)?this.chart.data.datasets.forEach((function(e,r){e.data=t[r].data,t[r].label&&(e.label=t[r].label)})):this.chart.data.datasets[0].data=t},t.prototype.getChartBuilder=function(t){var e=this,n=this.getDatasets(),a=Object.assign({},this.options);!1===this.legend&&(a.legend={display:!1}),a.hover=a.hover||{},a.hover.onHover||(a.hover.onHover=function(t,r){r&&!r.length||e.chartHover.emit({event:t,active:r})}),a.onClick||(a.onClick=function(t,r){e.chartClick.emit({event:t,active:r})});var o={type:this.chartType,data:{labels:this.labels,datasets:n},options:a,plugins:this.inlinePlugins};return new r.Chart(t,o)},t.prototype.getDatasets=function(){var t=this,e=void 0;if((!this.datasets||!this.datasets.length&&this.data&&this.data.length)&&(e=Array.isArray(this.data[0])?this.data.map((function(e,r){return{data:e,label:t.labels[r]||"Label "+r}})):[{data:this.data,label:"Label 0"}]),(this.datasets&&this.datasets.length||e&&e.length)&&(e=(this.datasets||e).map((function(e,r){var n=Object.assign({},e);return t.colors&&t.colors.length?Object.assign(n,t.colors[r]):Object.assign(n,C(t.chartType,r,n.data.length)),n}))),!e)throw new Error("ng-charts configuration error,\n      data or datasets field are required to render char "+this.chartType);return e},t.decorators=[{type:e.Directive,args:[{selector:"canvas[ngChartjs]",exportAs:"ng-chart-js"}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:s},{type:n}]},t.propDecorators={data:[{type:e.Input}],datasets:[{type:e.Input}],labels:[{type:e.Input}],options:[{type:e.Input}],inlinePlugins:[{type:e.Input}],chartType:[{type:e.Input}],colors:[{type:e.Input}],legend:[{type:e.Input}],adding:[{type:e.Input}],removing:[{type:e.Input}],resetOption:[{type:e.Input}],chartClick:[{type:e.Output}],chartHover:[{type:e.Output}]},t}();function b(t){return new i(t)}var I=function(){function t(){}return t.registerPlugin=function(e){return void 0===e&&(e=[]),{ngModule:t,providers:[{provide:a,useValue:e},{deps:[a],provide:o,useFactory:b}]}},t.decorators=[{type:e.NgModule,args:[{imports:[],declarations:[m],exports:[m],providers:[s]}]}],t}();t.DefaultColors=h,t.NgChartjsDirective=m,t.NgChartjsModule=I,t.NgChartjsService=s,t.formatBarColor=d,t.formatLineColor=l,t.formatPieColors=p,t.formatPolarAreaColors=g,t.generateColor=v,t.generateColors=y,t.getColors=C,t.getRandomColor=f,t.getRandomInt=c,t.ngChartjsCustomPluginsFactory=b,t.ngChartjsDefaultPluginsFactory=function(){return new i([])},t.rgba=u,t.ɵa=a,t.ɵb=o,t.ɵc=i,t.ɵd=n,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-chartjs.umd.min.js.map